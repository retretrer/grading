<link rel="import" href="/frontend-grading-engine/templates/active-test.html">

<template id="test-suite">
  <style scoped>
    .suite-title {
      font-size: 1.25em;
    }
  </style>
  <div class="suite">
    <div class="suite-title"></div>
  </div>
</template>

<script>
  (function() {
    var importDoc = document.currentScript.ownerDocument; // importee

    // Define and register <test-suite>
    // that uses Shadow DOM and a template.
    var proto = Object.create(HTMLElement.prototype);

    proto.createdCallback = function() {
      // get template in import
      var template = importDoc.querySelector('#test-suite');

      // import template into
      var clone = document.importNode(template.content, true);

      var root = this.createShadowRoot();
      root.appendChild(clone);
    };

    proto.attachedCallback = function() {
      var suite = this.shadowRoot.querySelector('.suite');
      this.shadowRoot.querySelector('.suite-title').innerHTML = this.suite.name;
    
      this.suite.tests.forEach(function(val, index, arr) {
        var at = document.createElement('active-test');
        at.test = val;
        suite.appendChild(at);
      })

    };

    document.registerElement('test-suite', {prototype: proto});
  })();
</script>